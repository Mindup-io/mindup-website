<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <title>MindUp - Don't be quiet</title>
    <link rel="shortcut icon" href="../favicon.ico">
    <link href="styles/bootstrap.min.css" rel="stylesheet">
    <link href="styles/landing.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Quicksand' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="styles/font-awesome-4.3.0/css/font-awesome.min.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
    <script type="text/javascript">
      var shiftWindow = function() { scrollBy(0, -74) };
      window.addEventListener("hashchange", shiftWindow);
      function load() {
        if (window.location.hash) shiftWindow();
      }
    </script>
  </head>

  <body onload="load()">

    <div id="fb-root"></div>
    <script>
      (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=364716317046631&version=v2.0";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>

    <header>
      <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" id="hamburger" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#"><img alt="" src="img/hibou-128.gif" height="64" width="64"></a>
            <ul class="nav navbar-nav mindup-large-screen hidden-xs">
              <li class="navbar-left"><a href="#">MindUp</a></li>
            </ul>
            <a class="navbar-brand mindup-small-screen visible-xs" href="#"><span>MindUp</span></a>
          </div>
          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
              <li>
                <a href="#useCase">Cas d'utilisation</a>
              </li>
              <li>
                <a href="#download">Télécharger</a>
              </li>
              <li>
                <a href="#contact">Contact</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <section id="description">
      <div class="container">
        <div class="row">
          <div class="col-lg-12" style="height:480px;">
            <h1>Anonyme. Massive. Incoercible.<br>Messagerie instantanée de proximité</h1>
            <h2>Dites ce que vous voulez anonymement<br>aux gens qui vous entourent.</h2>
            <a href="#download" class="btn red-btn btn-lg bump" style="position:absolute;bottom:40px;right:20px;margin:0">Installer MindUp</a>
          </div>
        </div>
      </div>
    </section>

    <section id="download">
      <h2 class="sr-only">Télécharger MindUp</h2>
      <div class="container">
        <nav class="navbar">
          <ul class="nav nav-pills nav-justified nav-stacked">
            <li data-bind="visible: isAndroid">
              <a>
                <img src="img/google.png" width="180" height="58" alt="" tabindex="0" data-toggle="popover" data-trigger="focus" title="Disponible prochainement !" data-placement="bottom" data-content="MindUp n'est pas encore sur les stores, mais vous pouvez vous inscrire comme bêta-testeur ! Regardez un peu plus bas :)">
              </a>
            </li>
            <li data-bind="visible: isIos">
              <a>
                <img src="img/apple.png" width="180" height="58" alt="" tabindex="0" data-toggle="popover" data-trigger="focus" title="Disponible prochainement !" data-placement="bottom" data-content="MindUp n'est pas encore sur les stores, mais vous pouvez vous inscrire comme bêta-testeur ! Regardez un peu plus bas :)">
              </a>
            </li>
            <li data-bind="visible: isWindowsPhone">
              <a>
                <img src="img/windows.png" width="180" alt="" height="58" tabindex="0" data-toggle="popover" data-trigger="focus" title="Disponible prochainement !" data-placement="bottom" data-content="MindUp n'est pas encore sur les stores, mais vous pouvez vous inscrire comme bêta-testeur ! Regardez un peu plus bas :)">
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </section>

    <section id="showroom">
      <div class="container">
        <h2 class="sr-only">Showroom</h2>
        <div class="row">
          <div class="col-lg-12">
          </div>
        </div>
      </div>
    </section>

    <section id="useCase" class="carousel slide">
      <h2 class="sr-only">Cas d'utilisation</h2>
      <ol class="carousel-indicators">
        <li data-target="#useCase" data-slide-to="0" class="active"></li>
        <li data-target="#useCase" data-slide-to="1"></li>
        <li data-target="#useCase" data-slide-to="2"></li>
        <li data-target="#useCase" data-slide-to="3"></li>
        <li data-target="#useCase" data-slide-to="4"></li>
      </ol>
      <div class="carousel-inner">
        <div class="item active">
          <div class="fill" style="background-image:url('img/uc1.jpg'); background-position:left top;"></div>
          <div class="carousel-caption">
            <h2>Diffusez vos idées</h2>
          </div>
        </div>
        <div class="item">
          <div class="fill" style="background-image:url('img/uc2.jpg');"></div>
          <div class="carousel-caption">
            <h2>Partagez vos passions</h2>
          </div>
        </div>
        <div class="item">
          <div class="fill" style="background-image:url('img/uc3.jpg');"></div>
          <div class="carousel-caption">
            <h2>Amusez-vous</h2>
          </div>
        </div>
        <div class="item">
          <div class="fill" style="background-image:url('img/uc4.jpg'); background-position:left top;"></div>
          <div class="carousel-caption">
            <h2>Organisez-vous</h2>
          </div>
        </div>
        <div class="item">
          <div class="fill" style="background-image:url('img/uc5.jpg');"></div>
          <div class="carousel-caption">
            <h2>Rassemblez-vous</h2>
          </div>
        </div>
      </div>
      <a class="left carousel-control" href="#useCase" data-slide="prev">
        <span class="icon-prev"></span>
      </a>
      <a class="right carousel-control" href="#useCase" data-slide="next">
        <span class="icon-next"></span>
      </a>
    </section>

    <section id="newsletter">
      <div class="container">
        <form class="form-inline row"
              action="//mindup.us10.list-manage.com/subscribe/post?u=ce96d3b55588e6f384ca9f909&amp;id=8c4f9cb192" method="post"
              name="0.1_mc-embedded-subscribe-form" target="_blank">
          <div class="col-md-4">
            <h2>Aidez-nous<span class="hidden-xs hidden-sm"> :</span></h2>
          </div>
          <div class="form-group col-md-4">
            <label class="sr-only" for="newsletter-email">Votre adresse email</label>
            <input type="email" name="EMAIL" class="form-control input-lg input-block-level" required="" id="newsletter-email" placeholder="Email">
          </div>
          <div class="col-md-4">
            <button type="submit" class="btn btn-primary red-btn input-lg">Devenez bêta-testeur !</button>
          </div>
        </form>
      </div>
    </section>

    <section id="social">
      <div class="container">
        <div class="row">
          <div class="col-md-6" id="facebook-widget">
            <h2>Suivez-nous sur Facebook</h2>
            <div class=fb-border>
              <div class="fb-like-box" data-href="https://www.facebook.com/MindUpOfficial" data-width="400" data-height="496" data-colorscheme="light" data-show-faces="true" data-header="true" data-stream="true" data-show-border="false"></div>
            </div>
          </div>
          <div class="col-md-6" id="twitter-widget">
            <h2>Suivez-nous sur Twitter</h2>
            <a class="twitter-timeline"
               href="https://twitter.com/twitterdev"
               data-widget-id="575310403883962368"
               data-theme=""
               data-show-replies="false"
               data-link-color="#E74C3C"
               data-related="twitterapi,twitter"
               data-aria-polite="assertive"
               data-border-color="#a9a9a9"
               height="502">
              Tweets by @twitterdev
            </a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
          </div>
        </div>
      </div>
    </section>

    <section id="contact">
      <div class="container">
        <h2>Contactez-nous</h2>
        <form data-bind="submit: sendContactMsg" role="form">
          <div class="form-group">
            <label for="contact-usr" class="sr-only">Name:</label>
            <input data-bind="value: name" type="text" class="form-control input-lg" id="contact-usr" placeholder="Nom (facultatif)">
          </div>
          <div class="form-group">
            <label for="contact-email" class="sr-only">Email:</label>
            <input data-bind="value: email" type="email" class="form-control input-lg" id="contact-email" placeholder="Email (facultatif)">
          </div>
          <div class="form-group">
            <label for="contact-comment" class="sr-only">Comment:</label>
            <textarea data-bind="textInput: msg" class="form-control input-lg" rows="5" required id="contact-comment" placeholder="Votre message"></textarea>
          </div>
          <div class="text-center">
            <button type="submit" class="btn btn-default btn-lg red-btn">Envoyer !</button>
          </div>
        </form>
      </div>
    </section>

    <footer>
      <div class="container">
        <nav class="navbar">
          <ul class="nav navbar-nav">
            <li>Copyright &copy; MindUp 2014</li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://www.facebook.com/MindUpOfficial" data-toggle="tooltip" data-placement="top" title="Suivez-nous sur Facebook !"><i class="fa fa-facebook fa-lg"></i></a></li>
            <li><a href="https://twitter.com/MindUpOfficial" data-toggle="tooltip" data-placement="top" title="Suivez-nous sur Twitter !"><i class="fa fa-twitter fa-lg"></i></a></li>
            <li><a href="#">Télécharger</a></li>
            <li><a href="policy.html">Politique de confidentialité</a></li>
            <li><a href="&#x6d;&#97;&#x69;&#x6c;&#116;&#111;&#x3a;&#99;&#111;&#x6e;&#x74;&#x61;&#x63;&#x74;&#x40;&#x6d;&#x69;&#x6e;&#x64;&#117;&#112;&#x2e;&#105;&#111;" data-toggle="tooltip" data-placement="top" title="Coucou&nbsp;:)">Contact</a></li>
          </ul>
        </nav>
      </div>
    </footer>

    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/knockout-3.3.0.js"></script>
    <script type="text/javascript">
      $(function() {
        /************************************************************************
        * Contact form
        ************************************************************************/

        function ajaxPost(url, data, cb) {
          $.ajax({
            type: "POST",
            url: url,
            data: data,
            contentType: 'application/json;charset=UTF-8',
            success: function (response) {
              cb(null, response);
            },
            error: function (response) {
              log.error('[serverManager] Unable to get the page: ' + url);
              cb(response);
            }
          });
        }

        function ContactMsgViewModel() {
          var self = this;

          self.name = ko.observable();
          self.email = ko.observable();
          self.msg = ko.observable();

          self.isValid = function () {
            return self.msg().length;
          }

          /* contact msg from */
          self.sendContactMsg = function () {
            console.log(ko.toJSON(self, null, '\t'));

            if (self.isValid()) {
              ajaxPost('/v1/contact-msg', ko.toJSON(self, null, '\t'), function (err, rsp) {
                if (err) {
                  return console.log('Can\'t send message: ' + err);
                }
                console.log('Message sent.');
              });

              self.clearFrom();
            }
          }

          self.clearFrom = function () {
            self.name('');
            self.email('');
            self.msg('');
          }
        }
        ko.applyBindings(new ContactMsgViewModel(), document.getElementById("contact"));

        /************************************************************************
        * Download buttons
        ************************************************************************/

        function LandingViewModel() {
          var self = this;
          self.userOs = '<%= os %>';

          self.isOtherMobileOrNavigator = function () {
            return self.userOs === 'null' ||
              (self.userOs !== 'AndroidOS' &&
               self.userOs !== 'iOS'       &&
               self.userOs.substr(0, 7) !== 'Windows')
          };

          // If is android, navigator or other mobile.
          self.isAndroid = ko.computed(function () {
            return self.userOs === 'AndroidOS' ||
              self.isOtherMobileOrNavigator();
          });

          // If is ios, navigator or other mobile.
          self.isIos = ko.computed(function () {
            return self.userOs === 'iOS'  ||
              self.isOtherMobileOrNavigator();
          });

          // If is windowsPhone, navigator or other mobile.
          self.isWindowsPhone = ko.computed(function () {
            return self.userOs === 'WindowsMobileOS' ||
              self.userOs === 'WindowsPhoneOS'  ||
              self.isOtherMobileOrNavigator();
          });
        }
        ko.applyBindings(new LandingViewModel(), document.getElementById("download"));

        /************************************************************************
        * Misc
        ************************************************************************/

        $('.carousel').carousel({
          interval: 3500
        })

        $(document).on('click','.navbar-collapse.in',function(e) {
          if( $(e.target).is('a') && $(e.target).attr('class') != 'dropdown-toggle' ) {
            $(this).collapse('hide');
          }
        });

        $('.navbar-nav a').click(function(e) {
          var dest = $(this).attr('href');
          if (dest === window.location.hash) e.preventDefault();
        });

        $(function () {
          $('[data-toggle="tooltip"]').tooltip()
        })

        $(function () {
          $('[data-toggle="popover"]').popover()
        })

        /************************************************************************
        * FB
        ************************************************************************/

        $('.fb-like-box').attr('data-width', $('#facebook-widget').width());

        $(window).resize(function(){
          console.log('resize');

          var newSize = $('#facebook-widget').width();
          $('.fb-like-box').attr('data-width', newSize);

          $('.fb-like-box iframe').attr('src', function(i, val) {
            return val.replace(/&container_width=\d+/, '&container_width=' + (newSize - 2))
            .replace(/&width=\d+/, '&width=' + newSize);
          });
        });
      });
    </script>
  </body>
</html>
